import axios, { AxiosError } from "axios";

const api = axios.create({ baseURL: "http://172.16.146.58:3000" });

api.interceptors.response.use(undefined, async (data: AxiosError<any>) => {
  if (data.response) {
    if (data.response.status === 403) {
    }
  }
  return Promise.reject(data);
});

api.interceptors.request.use(async (config) => {
  config.headers.set(
    "cookie",
    "sidebar_state=false; MT_ID_SESSION=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI5ZzNld1lTWExtSVFZemVrMGJpenl5OGhNVkUzb3NDYkNPY1BsVzZkeEJBIn0.eyJleHAiOjE3NDEwOTExODMsImlhdCI6MTc0MDY1OTE4MywiYXV0aF90aW1lIjoxNzQwNjU5MTgxLCJqdGkiOiJhNzllMjBlOC1kZGIyLTQ0MDItOWUyNS04Nzg2MmEyZjIxZGIiLCJpc3MiOiJodHRwczovL2Rldi5sb2dpbi5tdC5nb3YuYnIvYXV0aC9yZWFsbXMvbXQtcmVhbG0iLCJhdWQiOiJhY2NvdW50Iiwic3ViIjoiY2Y1ZjEwZDMtNmMwNC00OTk2LWJjMDctYTFjMDhjNTJjODA3IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoicHJvamV0by10ZW1wbGF0ZS1pbnRlZ3JhY2FvIiwic2lkIjoiODZmZGVjY2ItY2VhNC00MzkxLTk5ZDYtNjg5YWQ0MTdjZTVhIiwiYWxsb3dlZC1vcmlnaW5zIjpbIioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm10LWxvZ2luIiwib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiIsImNpZGFkYW8tdmFsaWQtdXNlciIsImRldHJhbi12YWxpZC11c2VyIiwiZGVmYXVsdC1yb2xlcy1tdC1yZWFsbSIsInNlc3AtdmFsaWQtdXNlciIsIm10Y2lkYWRhby12YWxpZC11c2VyIiwic2VnZXMtdXNlciJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib2lkYy1ub25jZS1jb21wYXRpYmxlLW1hcHBlciBvcGVuaWQgcHJvZmlsZSBlbWFpbCIsImZpcnN0TmFtZSI6IlRJQUdPIiwibGFzdE5hbWUiOiJEQU5JTE8gREUgTUFUT1MgQkFOS09XIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiVElBR08gREFOSUxPIERFIE1BVE9TIEJBTktPVyIsImNwZiI6IjAxMjM5MDcwMTI4IiwicHJlZmVycmVkX3VzZXJuYW1lIjoiMDEyMzkwNzAxMjgiLCJnaXZlbl9uYW1lIjoiVElBR08iLCJkYXRhTmFzY2ltZW50byI6IjE0LzA5LzE5OTkiLCJmYW1pbHlfbmFtZSI6IkRBTklMTyBERSBNQVRPUyBCQU5LT1ciLCJub21lTWFlIjoiRUxJU0FORSBNT1JFSVJBIERFIE1BVE9TIEJBTktPVyIsImVtYWlsIjoidGlhZ29iYW5rb3dAc2VwbGFnLm10Lmdvdi5iciJ9.lL_8yjFa6hm33Fq8NVtzAf30WlHvRQ1Wynr6_CcCpB8aLMpbANXUMUK7STUS6kTUDCfA3TZiAGg-qgYQ9zojNL6cZFOeSd0Y5-36rEWZ16vRcwLd86epYVZZDz8QnXtUzIHJI7KVIChHE1tcRA0G5hqvZ_vPmtQEfZB0JDmlSxv8tupk9Jgqa_APOPfapjrUx9nXnzjSyrFqruQSj56JpniXh2qZ4Z4ssVuMdDviJUJBwp4_LFdnkCgoSRWSr3KNOEysQuXSP9iADb5zpD8QIN1GIJVlJoSzwH700R32NisCXYi2E5rz4V0EPstBCgrDH7BPpyZM9i6x64Y4W6KJbA; SESSION=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjE5Nzk2N2RjLWI1NTUtNGJjNC04ZDM1LTI0ZWQ4ODNiMDlhYiIsIm5hbWUiOiJUSUFHTyBEQU5JTE8gREUgTUFUT1MgQkFOS09XIiwiZW1haWwiOiJ0aWFnb2Jhbmtvd0BzZXBsYWcubXQuZ292LmJyIiwiY3BmIjoiMDEyMzkwNzAxMjgiLCJhdmF0YXIiOm51bGwsImlzX2FjdGl2ZSI6ZmFsc2UsImlzX2RlbGV0ZWQiOmZhbHNlLCJjcmVhdGVkX2F0IjoiMjAyNS0wMi0yMVQxNTozMDowMy4wOTRaIiwidXBkYXRlZF9hdCI6IjIwMjUtMDItMjdUMTI6MTk6MTAuNjk5WiIsImlhdCI6MTc0MDY1ODc1MCwiZXhwIjozNDgxNzQ5OTMzfQ.wh8bI1HWCsMYe1lOWi7RLUsNewdjxhBp4mAcwu4j-zs; USER_DATA=%7B%22id%22%3A%22197967dc-b555-4bc4-8d35-24ed883b09ab%22%2C%22name%22%3A%22TIAGO%20DANILO%20DE%20MATOS%20BANKOW%22%2C%22email%22%3A%22tiagobankow%40seplag.mt.gov.br%22%2C%22cpf%22%3A%2201239070128%22%2C%22avatar%22%3Anull%2C%22is_active%22%3Afalse%2C%22is_deleted%22%3Afalse%2C%22created_at%22%3A%222025-02-21T15%3A30%3A03.094Z%22%2C%22updated_at%22%3A%222025-02-27T12%3A19%3A10.699Z%22%7D"
  );

  return config;
});

export { api };
